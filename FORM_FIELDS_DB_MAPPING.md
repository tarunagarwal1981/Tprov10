# Form Fields to Database Column Mapping

This document verifies that all form fields in the onboarding/profile forms correctly map to database columns.

## Account Details Form (`/api/profile/account`)

### Form Fields → Database Columns (`account_details` table)
- `firstName` → `first_name` ✓
- `lastName` → `last_name` ✓
- `profilePhotoUrl` → `profile_photo_url` ✓
- `aboutMe` → `about_me` ✓

### Note:
- `email` and `phoneNumber` are stored in the `users` table, not `account_details`
- The API route `/api/profile/account` GET endpoint returns email and phone from the `users` table for display purposes
- The POST endpoint only updates `account_details` fields

## Brand Details Form (`/api/profile/brand`)

### Form Fields → Database Columns (`brand_details` table)
- `companyName` → `company_name` ✓
- `contactPerson` → `contact_person` ✓
- `contactNumber` → `contact_number` ✓
- `contactEmail` → `contact_email` ✓
- `organisationWebsite` → `organisation_website` ✓
- `googleBusinessProfileId` → `google_business_profile_id` ✓
- `googleBusinessProfileUrl` → `google_business_profile_url` ✓
- `logoUrl` → `logo_url` ✓

## Business Details Form (`/api/profile/business`)

### Form Fields → Database Columns (`business_details` table)
- `productSold` → `product_sold` ✓
- `companyIncorporationYear` → `company_incorporation_year` ✓ (converted to INTEGER)
- `city` → `city` ✓
- `numberOfEmployees` → `number_of_employees` ✓ (converted to INTEGER)
- `customerAcquisition` → `customer_acquisition` ✓ (stored as JSONB array)
- `internationalDestinations` → `international_destinations` ✓ (stored as JSONB array)
- `domesticDestinations` → `domestic_destinations` ✓ (stored as JSONB array)

## Documents Form (`/api/profile/documents`)

### Document Fields → Database Columns (`documents` table)
- `documentType` → `document_type` ✓
- `fileName` → `document_name` ✓
- `fileSize` → `file_size` ✓
- `mimeType` → `mime_type` ✓
- `s3Key` → `s3_key` ✓ (generated by API)
- `status` → `status` ✓ (defaults to 'pending')

### All documents are linked to user via:
- `user_id` UUID (from `getUserIdFromToken()`)

## User Linking

All profile tables use `user_id` as the primary/foreign key:
- `account_details.user_id` → `users.id`
- `brand_details.user_id` → `users.id`
- `business_details.user_id` → `users.id`
- `documents.user_id` → `users.id`

The `user_id` is extracted from the access token (either Cognito token or phone auth session) using `getUserIdFromToken()` helper function.

## Status: ✅ All Fields Mapped Correctly

All form fields have corresponding database columns and are properly linked to the user via `user_id`.

